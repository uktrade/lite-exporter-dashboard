@import models.view.RfiView

@(rfiView: RfiView, allowReplies: Boolean)

<div class="message-panel" id=@rfiView.getRfiId>
  <header>
    <h3 class="heading-small">
      <span class="rfi-icon large-icon"></span>
      Request for information
    </h3>

    <div class="grid-row">

      <div class="column-two-thirds">
        <span class="heading-small">
          Received on:
        </span>
        <span>
        @rfiView.getReceivedDate
        </span>
      </div>

      <div class="column-one-third">
        <span class="heading-small">
          Sender:
        </span>
        <span>
        @rfiView.getSender
        </span>
      </div>

    </div>

    @if(rfiView.getWithdrawnDate != null) {
      <span class="heading-small">
        Withdrawn on @rfiView.getWithdrawnDate - no reply needed
      </span>
    } else {
      <span class="heading-small">
        Reply by:
      </span>
      <span>
      @rfiView.getReplyBy
      </span>
    }

  </header>

  <article>
    <div @if(rfiView.getWithdrawnDate != null) {
      class="gray-out"}>
      <h4 class="heading-small">Message</h4>
      <div>
      @Html(rfiView.getMessage)
      </div>
    </div>

    @if(allowReplies && rfiView.getRfiReplyView == null && rfiView.getWithdrawnDate == null) {
      <a href="@routes.RfiTabController.showReplyForm(rfiView.getAppId, rfiView.getRfiId).withFragment("reply")" class="rfi-reply-link"><span class="icon-reply"></span>
        Reply to this message</a>
    }
  </article>
</div>
