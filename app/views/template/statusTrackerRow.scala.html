@import models.view.StatusItemView
@import template._
@import views.html.common.page._

@(statusItemView: StatusItemView)
<tr>
  <td class="status-table-stage">
    <div class="bold-small">@statusItemView.getStatus</div>
    @if(statusItemView.getStatusExplanation != "") {
      <p>@statusItemView.getStatusExplanation</p>
    }
    @for(notificationView <- statusItemView.getNotificationViews) {
      @if(notificationView.getEventLabelType != null) {
        @eventLabel(notificationView.getEventLabelType, notificationView.getLinkText, notificationView.getLink,
          notificationView.getDescription)
      } else {
        <p></p>
        <a href="@notificationView.getLink">
        @notificationView.getLinkText
        </a>
      }
    }
  </td>
  <td class="status-table-status">
    @statusItemView.getProcessLabel match {
      case "Finished" => {
        @statusLabel("finished")
      }
      case "In progress" => {
        @statusLabel("progress")
      }
      case "Not started" => {
        @statusLabel()
      }
      case "Withdrawn" => {
        @statusLabel("cancelled", "Withdrawn")
      }
      case "Stopped" => {
        @statusLabel("cancelled")
      }
      case default => {
        @statusLabel("neutral", default)
      }
    }
    @if(statusItemView.getProcessDescription.length > 0) {
      <p class="secondary-text" aria-describedby="status-tracker-footnote">@Html(statusItemView.getProcessDescription)</p>
    }
  </td>
</tr>
